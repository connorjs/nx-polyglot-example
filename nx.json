{
	"$schema": "./node_modules/nx/schemas/nx-schema.json",
	"affected": {
		"defaultBase": "main"
	},
	"namedInputs": {
		"css": ["{projectRoot}/**/*.css"],
		"default": ["{projectRoot}/**/*"],
		"rootDotnetConfig": [
			"{workspaceRoot}/global.json",
			"{workspaceRoot}/Directory.Build.props",
			"{workspaceRoot}/Directory.Packages.props"
		],
		"rootTsConfig": [
			"{workspaceRoot}/.config/ts/tsconfig.json",
			"{workspaceRoot}/tsconfig.json"
		],
		"typescript": ["{projectRoot}/**/*.{ts,tsx}", "{projectRoot}/tsconfig.json"]
	},
	"targetDefaults": {
		"clean": {
			"cache": false,
			"executor": "nx:run-commands",
			"options": {
				// shx if needed
				"command": "rm -rf build dist",
				"cwd": "{projectRoot}"
			}
		},
		"codegen": {
			// Create codegen target as a no-op, so that other `targetDefaults` can reference it
			"executor": "nx:noop"
		},
		"csharpier": {
			"cache": true,
			"executor": "nx:run-commands",
			"options": {
				"command": "dotnet csharpier --check {projectRoot}"
			}
		},
		"dotnet build": {
			"cache": true,
			"dependsOn": ["^dotnet build"],
			"executor": "nx:run-commands",
			"inputs": ["rootDotnetConfig", "{projectRoot}/main/**/*.{cs,csproj}"],
			"options": {
				"command": "dotnet build -c Release {projectRoot}/main"
			},
			"outputs": ["{projectRoot}/build/main"]
		},
		"dotnet test": {
			"cache": true,
			"dependsOn": ["dotnet build"],
			"executor": "nx:run-commands",
			"inputs": [
				"rootDotnetConfig",
				"{projectRoot}/{main,test}/**/*.{cs,csproj}",
				"{projectRoot}/build/main"
			],
			"options": {
				"command": "dotnet test -c Release {projectRoot}/test"
			},
			"outputs": ["{projectRoot}/build/test"]
		},
		"eslint": {
			"cache": true,
			"dependsOn": ["^tsc", "codegen"],
			"executor": "nx:run-commands",
			"options": {
				"command": "eslint -f pretty {projectRoot}"
			}
		},
		"prettier": {
			"cache": true,
			"executor": "nx:run-commands",
			"options": {
				"command": "prettier --check '{projectRoot}/**/*.{cjs,css,cts,graphql,html,js,json,jsonc,jsx,md,pcss,scss,ts,tsp,tsx,yaml,yml}'"
			}
		},
		"tsc": {
			"cache": true,
			"dependsOn": ["^tsc", "codegen"],
			"executor": "nx:run-commands",
			"inputs": ["rootTsConfig", "typescript"],
			"options": {
				"command": "tsc --build {projectRoot}"
			},
			"outputs": ["{projectRoot}/build/tsc"]
		}
	},
	"workspaceLayout": {
		"appsDir": "apps",
		"libsDir": "libs"
	}
}
